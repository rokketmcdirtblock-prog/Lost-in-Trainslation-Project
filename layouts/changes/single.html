{{ define "main" }}
  <div class="pt-8 lg:pt-12 px-4 lg:px-0 lg:ml-[10vw] lg:flex lg:gap-8">
    
    <!-- Sidebar -->
    <aside class="lg:sticky lg:top-20 lg:self-start bg-bg-alt p-4 mb-6 lg:mb-0 rounded lg:w-48 shrink-0">
      <button 
        onclick="document.getElementById('sidebar-list').classList.toggle('hidden')"
        class="lg:hidden w-full flex justify-between items-center font-bold text-text mb-2"
      >
        <span>Change Log</span>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </button>
      
      <h2 class="hidden lg:block font-bold text-text mb-4">Change Log</h2>
      
      <ul id="sidebar-list" class="hidden lg:block space-y-2">
        {{ $changes := where .Site.RegularPages "Section" "changes" }}
        {{ range $changes.ByDate }}
          <li>
            <a 
              href="{{ .Permalink }}" 
              class="{{ if eq .Permalink $.Permalink }}text-accent font-bold{{ else }}text-text-muted hover:text-primary{{ end }}"
            >
              {{ .Title }}
            </a>
          </li>
        {{ end }}
      </ul>
    </aside>
    
    <!-- Main content -->
    <div class="max-w-prose">
      <h1 class="text-2xl md:text-3xl font-bold text-text mb-2">{{ .Title }}</h1>
      <p class="text-text-muted mb-6">{{ .Date.Format "January 2, 2006" }}</p>
      <div class="text-text">
        {{ .Content }}
      </div>
    </div>
    
  </div>
{{ end }}