{{ $changes := where .Site.RegularPages "Section" "changes" }}
{{ $current := . }}

<aside class="bg-bg-alt p-4 w-full md:w-48 md:min-w-48">
  <button 
    onclick="document.getElementById('sidebar-list').classList.toggle('hidden')"
    class="md:hidden w-full flex justify-between items-center font-bold text-text mb-2"
  >
    <span>Change Log</span>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
    </svg>
  </button>
  
  <h2 class="hidden md:block font-bold text-text mb-4">Change Log</h2>
  
  <ul id="sidebar-list" class="hidden md:block space-y-2">
    {{ range $changes.ByDate }}
      <li>
        <a 
          href="{{ .Permalink }}" 
          class="{{ if eq .Permalink $current.Permalink }}text-accent font-bold{{ else }}text-text-muted hover:text-primary{{ end }}"
        >
          {{ .Title }}
        </a>
      </li>
    {{ end }}
  </ul>
</aside>